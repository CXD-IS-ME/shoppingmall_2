import{r as c,o as E,c as w,a as t,b as S,d as a,e as V,E as f,n as B,m as I,s as T,p as x,Y as $,ak as A,f as k,aC as F,aD as L,a1 as M,_ as U,aF as q,Z as R,al as Z}from"./index-BB3_t5sF.js";/* empty css                   */import{_ as z}from"./PageContainer-Cl73poUb.js";/* empty css               *//* empty css                    *//* empty css                  *//* empty css                     *//* empty css                  */import{g as G,h as Y,a as j,i as H}from"./article-oSFKJoHP.js";/* empty css                  *//* empty css                   *//* empty css                     *//* empty css                 *//* empty css                   *//* empty css                       *//* empty css                */import"./_plugin-vue_export-helper-DlAUqK2U.js";const J={class:"dialog-footer"},K={__name:"ChannelEdit",emits:["success"],setup(D,{expose:p,emit:m}){const o=c(!1),s=c(),l=c({CategoryID:"",CategoryName:"",cate_alias:""}),g={CategoryName:[{required:!0,message:"请输入分类名称",trigger:"blur"},{pattern:/^\S{1,10}$/,message:"分类名必须是 1-10 位的非空字符",trigger:"blur"}],cate_alias:[{required:!0,message:"请输入分类别名",trigger:"blur"},{pattern:/^[a-zA-Z0-9]{1,15}$/,message:"分类名必须是 1-15 位的字母或数字",trigger:"blur"}]},v=m,C=async()=>{if(await s.value.validate(),!s.value.validate())return;l.value.CategoryID?(await G(l.value),f.success("编辑成功")):(await Y(l.value),f.success("添加成功")),o.value=!1,v("success")};return p({open:i=>{o.value=!0,l.value={...i}}}),(i,e)=>{const u=B,d=I,y=T,_=x,b=$;return E(),w(b,{modelValue:o.value,"onUpdate:modelValue":e[3]||(e[3]=n=>o.value=n),title:l.value.CategoryID?"编辑分类":"添加分类",width:"30%"},{footer:t(()=>[S("span",J,[a(_,{onClick:e[2]||(e[2]=n=>o.value=!1)},{default:t(()=>e[4]||(e[4]=[V("取消")])),_:1}),a(_,{type:"primary",onClick:C},{default:t(()=>e[5]||(e[5]=[V(" 确认 ")])),_:1})])]),default:t(()=>[a(y,{ref_key:"formRef",ref:s,model:l.value,rules:g,"label-width":"100px",style:{"padding-right":"30px"}},{default:t(()=>[a(d,{label:"分类名称",prop:"CategoryName"},{default:t(()=>[a(u,{modelValue:l.value.CategoryName,"onUpdate:modelValue":e[0]||(e[0]=n=>l.value.CategoryName=n),placeholder:"请输入分类名称"},null,8,["modelValue"])]),_:1}),a(d,{label:"分类别名",prop:"cate_alias"},{default:t(()=>[a(u,{modelValue:l.value.cate_alias,"onUpdate:modelValue":e[1]||(e[1]=n=>l.value.cate_alias=n),placeholder:"请输入分类别名"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}},pe={__name:"ArticleChannel",setup(D){const p=c([]),m=c(!1),o=c();c({CategoryName:"",CategoryID:"",cate_alias:""});const s=async()=>{m.value=!0;const r=await j();p.value=r.data.data.data,m.value=!1};s();const l=async r=>{await M.confirm("你确认要删除该分类么","温馨提示",{type:"warning",confirmButtonText:"确认",cancelButtonText:"取消"});try{await H(r.CategoryID),f.success("删除成功"),s()}catch{f.error("删除失败")}},g=r=>{o.value.open(r)},v=()=>{o.value.open({})},C=()=>{s()};return(r,i)=>{const e=x,u=U,d=q,y=R,_=z,b=Z;return E(),w(_,{title:"产品分类"},{extra:t(()=>[a(e,{onClick:v},{default:t(()=>i[0]||(i[0]=[V("添加分类")])),_:1})]),default:t(()=>[A((E(),w(y,{data:p.value,style:{width:"100%"}},{empty:t(()=>[a(d,{description:"没有数据"})]),default:t(()=>[a(u,{type:"index",label:"序号",width:"100"}),a(u,{prop:"CategoryName",label:"分类名称"}),a(u,{prop:"cate_alias",label:"分类别名"}),a(u,{label:"操作",width:"150"},{default:t(({row:n,$index:h})=>[a(e,{icon:k(F),circle:"",plain:"",type:"primary",onClick:N=>g(n,h)},null,8,["icon","onClick"]),a(e,{icon:k(L),circle:"",plain:"",type:"danger",onClick:N=>l(n,h)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[b,m.value]]),a(K,{ref_key:"dialog",ref:o,onSuccess:C},null,512)]),_:1})}}};export{pe as default};
