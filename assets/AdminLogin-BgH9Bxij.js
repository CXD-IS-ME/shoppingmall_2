import{r as g,u as L,w as q,c as _,a,v as B,o as v,b as V,d as l,e as r,f as p,g as k,l as w,E as c,i as R,k as $,m as D,n as J,p as O,q as T,s as z,t as A}from"./index-BB3_t5sF.js";/* empty css               *//* empty css                    *//* empty css                     *//* empty css                *//* empty css                  *//* empty css                 */import{a as F,b as M}from"./admin-BoluaQyv.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const G={class:"input_box"},H={class:"flex"},K={__name:"AdminLogin",setup(Q){const d=g(!1),m=g(),s=g({Username:"",Password:"",repassword:""}),x={Username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:5,max:10,message:"用户名必须是 5-10位 的字符",trigger:"blur"}],Password:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码必须是 6-615位 的非空字符",trigger:"blur"}],repassword:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码必须是 6-15位 的非空字符",trigger:"blur"},{validator:(u,e,n)=>{e!==s.value.Password?n(new Error("两次输入密码不一致")):n()},trigger:"blur"}]},b=async()=>{await m.value.validate(),await F(s.value),c.success("注册成功"),d.value=!1},S=L(),E=R(),P=()=>{localStorage.clear(),c.error("登录信息已失效，请重新登录")},I=async()=>{await m.value.validate();const u=await M(s.value);S.setToken(u.data.token),c.success("登录成功！"),E.push("/admin/layout"),localStorage.setItem("res",JSON.stringify(u.data.data.Username)),localStorage.setItem("avatar",JSON.stringify(u.data.data.avatar)),localStorage.setItem("UserID",JSON.stringify(u.data.data.UserID));const e=24*60*60*1e3;setTimeout(P,e)};return q(d,()=>{s.value={Username:"",Password:"",repassword:""}}),(u,e)=>{const n=$,o=D,i=J,y=O,f=T,U=z,C=A,N=B;return v(),_(N,{class:"login-page"},{default:a(()=>[V("div",G,[l(n,{span:u.auto,class:"form"},{default:a(()=>[d.value?(v(),_(U,{key:0,model:s.value,rules:x,ref_key:"form",ref:m,size:"large",autocomplete:"off"},{default:a(()=>[l(o,null,{default:a(()=>[l(n,{class:"title"},{default:a(()=>e[7]||(e[7]=[r("注册")])),_:1}),l(n,{class:"title_text"},{default:a(()=>e[8]||(e[8]=[r("register")])),_:1})]),_:1}),l(o,{prop:"Username"},{default:a(()=>[l(i,{modelValue:s.value.Username,"onUpdate:modelValue":e[0]||(e[0]=t=>s.value.Username=t),"prefix-icon":p(k),placeholder:"请输入用户名"},null,8,["modelValue","prefix-icon"])]),_:1}),l(o,{prop:"Password"},{default:a(()=>[l(i,{modelValue:s.value.Password,"onUpdate:modelValue":e[1]||(e[1]=t=>s.value.Password=t),"prefix-icon":p(w),type:"password",placeholder:"请输入密码"},null,8,["modelValue","prefix-icon"])]),_:1}),l(o,{prop:"repassword"},{default:a(()=>[l(i,{modelValue:s.value.repassword,"onUpdate:modelValue":e[2]||(e[2]=t=>s.value.repassword=t),"prefix-icon":p(w),type:"password",placeholder:"请输入再次密码"},null,8,["modelValue","prefix-icon"])]),_:1}),l(o,null,{default:a(()=>[l(y,{onClick:b,class:"button",type:"primary","auto-insert-space":""},{default:a(()=>e[9]||(e[9]=[r(" 注册 ")])),_:1})]),_:1}),l(o,{class:"flex"},{default:a(()=>[l(f,{type:"info",underline:!1,onClick:e[3]||(e[3]=t=>d.value=!1)},{default:a(()=>e[10]||(e[10]=[r(" ← 返回 ")])),_:1})]),_:1})]),_:1},8,["model"])):(v(),_(U,{key:1,model:s.value,rules:x,ref_key:"form",ref:m,size:"large",autocomplete:"off"},{default:a(()=>[l(o,null,{default:a(()=>[l(n,{class:"title"},{default:a(()=>e[11]||(e[11]=[r("登录")])),_:1}),l(n,{class:"title_text"},{default:a(()=>e[12]||(e[12]=[r("login")])),_:1})]),_:1}),l(o,{prop:"Username"},{default:a(()=>[l(i,{modelValue:s.value.Username,"onUpdate:modelValue":e[4]||(e[4]=t=>s.value.Username=t),"prefix-icon":p(k),placeholder:"请输入用户名"},null,8,["modelValue","prefix-icon"])]),_:1}),l(o,{prop:"Password"},{default:a(()=>[l(i,{modelValue:s.value.Password,"onUpdate:modelValue":e[5]||(e[5]=t=>s.value.Password=t),name:"Password","prefix-icon":p(w),type:"password",placeholder:"请输入密码"},null,8,["modelValue","prefix-icon"])]),_:1}),l(o,{class:"flex"},{default:a(()=>[V("div",H,[l(C,null,{default:a(()=>e[13]||(e[13]=[r("记住我")])),_:1}),l(f,{type:"info",underline:!1,href:"/login"},{default:a(()=>e[14]||(e[14]=[r("前往用户端")])),_:1}),l(f,{type:"primary",underline:!1},{default:a(()=>e[15]||(e[15]=[r("忘记密码？")])),_:1})])]),_:1}),l(o,null,{default:a(()=>[l(y,{onClick:I,class:"button",type:"primary","auto-insert-space":""},{default:a(()=>e[16]||(e[16]=[r("登录")])),_:1})]),_:1}),l(o,{class:"flex"},{default:a(()=>[l(f,{type:"info",underline:!1,onClick:e[6]||(e[6]=t=>d.value=!0)},{default:a(()=>e[17]||(e[17]=[r(" 注册(商家) → ")])),_:1})]),_:1})]),_:1},8,["model"]))]),_:1},8,["span"])])]),_:1})}}},oe=j(K,[["__scopeId","data-v-fafacbc1"]]);export{oe as default};
