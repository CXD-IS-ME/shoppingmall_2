import{ab as x,r as u,c as v,a,ac as E,o as U,b as m,d as s,e as y,i as I,E as p,ad as F,n as B,m as N,p as S,s as k}from"./index-BB3_t5sF.js";/* empty css                *//* empty css                     *//* empty css                  *//* empty css                 */import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const C={__name:"UserPassword",setup(D){const i=I(),w=localStorage.getItem("res")?JSON.parse(localStorage.getItem("res")):null,o=x({oldPassword:"",newPassword:"",confirmPassword:"",UserID:w}),n=u(null),c=u(!1),f={oldPassword:[{required:!0,message:"请输入旧密码",trigger:"blur"}],newPassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:20,message:"密码长度在 6 到 20 个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认新密码",trigger:"blur"},{validator:(l,e,r)=>{e!==o.newPassword?r(new Error("两次输入密码不一致")):r()},trigger:"blur"}]},_=()=>{n.value.validate(l=>{l?g():p.error("表单验证失败")})},g=async()=>{c.value=!0;const{oldPassword:l,newPassword:e,UserID:r}=o;await F({oldPassword:l,newPassword:e,UserID:r}),p.success("密码修改成功"),i.push("/admin/login")};return(l,e)=>{const r=B,d=N,P=S,b=k,V=E;return U(),v(V,{class:"box-card"},{default:a(()=>[e[4]||(e[4]=m("div",{slot:"header",class:"clearfix"},[m("span",null,"修改密码")],-1)),s(b,{ref_key:"passwordForm",ref:n,model:o,rules:f,"label-width":"100px"},{default:a(()=>[s(d,{label:"旧密码",prop:"oldPassword"},{default:a(()=>[s(r,{type:"password",modelValue:o.oldPassword,"onUpdate:modelValue":e[0]||(e[0]=t=>o.oldPassword=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),s(d,{label:"新密码",prop:"newPassword"},{default:a(()=>[s(r,{type:"password",modelValue:o.newPassword,"onUpdate:modelValue":e[1]||(e[1]=t=>o.newPassword=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),s(d,{label:"确认新密码",prop:"confirmPassword"},{default:a(()=>[s(r,{type:"password",modelValue:o.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=t=>o.confirmPassword=t),autocomplete:"off"},null,8,["modelValue"])]),_:1}),s(d,null,{default:a(()=>[s(P,{type:"primary",onClick:_},{default:a(()=>e[3]||(e[3]=[y("提交")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1})}}},z=q(C,[["__scopeId","data-v-44f6cd07"]]);export{z as default};
