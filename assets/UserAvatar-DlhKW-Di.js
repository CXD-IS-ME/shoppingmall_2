import{_ as y}from"./PageContainer-Cl73poUb.js";import{u as S,r as l,c as i,a,o as r,d as o,L as w,f as n,a7 as _,b as E,e as d,a8 as x,a9 as A,E as B,S as I,aa as R,p as b}from"./index-BB3_t5sF.js";/* empty css                  *//* empty css                    *//* empty css                   */import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                */const N=["src"],V={__name:"UserAvatar",setup(z){const s=S(),t=l(s.user.Image);console.log("imgUrl",s.user.value);const u=l(),m=c=>{const e=new FileReader;e.readAsDataURL(c.raw),e.onload=()=>{t.value=e.result}},f=l(localStorage.getItem("res")),v=async()=>{await A(t.value,f.value),await s.getUser(),B.success("头像更新成功")};return(c,e)=>{const g=I,U=R,p=b,k=y;return r(),i(k,{title:"更换头像"},{default:a(()=>[o(U,{ref_key:"uploadRef",ref:u,"auto-upload":!1,class:"avatar-uploader","show-file-list":!1,"on-change":m},{default:a(()=>[t.value?(r(),w("img",{key:0,src:t.value,class:"avatar"},null,8,N)):(r(),i(g,{key:1,class:"avatar-uploader-icon"},{default:a(()=>[o(n(_))]),_:1}))]),_:1},512),e[3]||(e[3]=E("br",null,null,-1)),o(p,{onClick:e[0]||(e[0]=F=>u.value.$el.querySelector("input").click()),type:"primary",icon:n(_),size:"large"},{default:a(()=>e[1]||(e[1]=[d("选择图片")])),_:1},8,["icon"]),o(p,{onClick:v,type:"success",icon:n(x),size:"large"},{default:a(()=>e[2]||(e[2]=[d("上传头像")])),_:1},8,["icon"])]),_:1})}}},G=C(V,[["__scopeId","data-v-5211795e"]]);export{G as default};
